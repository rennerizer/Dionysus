<div class="city-edit">
  <h1>{{title}}</h1>

  <p *ngIf="this.id && !city"><em>Loading...</em></p>

  <div class="form" [formGroup]="form" (ngSubmit)="onSubmit()">

    <div *ngIf="form.invalid && form.errors?.isDupeCity" class="alert alert-danger">
      <strong>Error</strong>: A city with the same <i>name</i>, <i>lat</i>, <i>lon</i>, and <i>country</i> already exists.

    </div>

    <div class="form-group">

      <!--<div class="form-group" [ngClass]="{ 'has-error has-feedback' : hasError('name') }"></div>-->

      <label for="name">City name:</label>
      <br />
      <input type="text" id="name" formControlName="name" required placeholder="City name..." class="form-control" />

      <div *ngIf="form.get('name').invalid && (form.get('name').dirty || form.get('name').touched)" class="invalid-feedback">
        <div *ngIf="form.get('name').errors?.required">
          Name is required.
        </div>
      </div>

      <!--
    <span *ngIf="hasError('name')" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
    <div *ngIf="hasError('name')" class="help-block">Name is a required field: please insert a valid name.</div>
    -->

    </div>

    <div class="form-group">

      <!--<div class="form-group" [ngClass]="{ 'has-error has-feedback' : hasError('lat') }"></div>-->

      <label for="lat">City latitude:</label>
      <br />
      <input type="text" id="lat" formControlName="lat" required placeholder="Latitude..." class="form-control" />

      <div *ngIf="form.get('lat').invalid && (form.get('lat').dirty || form.get('lat').touched)" class="invalid-feedback">
        <div *ngIf="form.get('lat').errors?.required">
          Latitude is required.
        </div>
      </div>

      <!--
  <span *ngIf="hasError('lat')" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
  <div *ngIf="hasError('lat')" class="help-block">Latitude is a required field: please insert a valid number.</div>
  -->

    </div>

    <div class="form-group">

      <!--<div class="form-group" [ngClass]="{ 'has-error has-feedback' : hasError('lon') }"></div>-->

      <label for="lon">City longitude:</label>
      <br />
      <input type="text" id="lon" formControlName="lon" required placeholder="Longitude..." class="form-control" />

      <div *ngIf="form.get('lon').invalid && (form.get('lon').dirty || form.get('lon').touched)" class="invalid-feedback">
        <div *ngIf="form.get('lon').errors?.required">
          Longitude is required.
        </div>
      </div>

      <!--
  <span *ngIf="hasError('lon')" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
  <div *ngIf="hasError('lon')" class="help-block">Longitude is a required field: please insert a valid number.</div>
  -->

    </div>

    <div class="form-group" *ngIf="countries">

      <!--<div class="form-group" [ngClass]="{ 'has-error has-feedback' : hasError('countryId') }"></div>-->

      <label for="countryId">Country:</label>
      <br />
      <mat-form-field *ngIf="countries">
        <mat-label>Select a Country...</mat-label>
        <mat-select id="countryId" formControlName="countryId">
          <mat-option *ngFor="let country of countries" [value]="country.id">
            {{ country.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div *ngIf="form.get('countryId').invalid && (form.get('countryId').dirty || form.get('countryId').touched)" class="invalid-feedback">
        <div *ngIf="form.get('countryId').errors?.required">
          Please select a Country.
        </div>
      </div>

      <!--<select id="countryId" class="form-control" formControlName="countryId">
    <option value="">--- Select a country ---</option>
    <option *ngFor="let country of countries" [value]="country.id">{{ country.name }}</option>
  </select>-->
      <!--
  <span *ngIf="hasError('countryId')" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
  <div *ngIf="hasError('countryId')" class="help-block">Country is a required field: please insert a valid country.</div>
  -->

    </div>

    <div class="form-group commands">
      <button *ngIf="id" type="submit" (click)="onSubmit()" class="btn btn-success" [disabled]="form.invalid">Save City</button>

      <button *ngIf="!id" type="submit" (click)="onSubmit()" class="btn btn-success" [disabled]="form.invalid">Create City</button>

      <button type="submit" [routerLink]="['/countries']" class="btn btn-default">Cancel</button>
    </div>

  </div>
</div>
